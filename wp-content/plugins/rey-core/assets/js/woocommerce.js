!function(f){"use strict";var e=function(){this.init=function(){this.reyTheme=f.reyTheme,this.reyHelpers=f.reyHelpers,this.events(),this.genericHtml(),this.viewSelectorColumns(),this.productsGrids(),this.loopProductSlideshows(),this.miniCart.init(this),this.activeFilterCount(f(document)),this.ajaxSearch.init(this),this.accountPanel.init(this),this.wishlist_account_panel(),this.quickview.init(this),this.overrideSelect2Defaults(),this.productVariations(),this.fixedSummary(),this.wcFilterSidebar.addCloseButton(),this.requestQuote.init(),this.AjaxAddToCartProductPage(),this.equalizeProductItems(),this.quantityButtonControls(),this.variableProductAddToCart(),this.productPageVariationsTweaks(),this.productsCarousels(),this.customizeAtcButton(),this.wcAccountForms(),this.productPageMobileTabs(),this.refreshProductCountAjaxLoad(),this.automaticallyUpdateCart(),this.relatedProductsCarousel()},this.events=function(){var a=this;f(document).on("click",".rey-filterBtn:not(.filter-btnMobile) .js-rey-filterBtn-open",function(e){e.preventDefault(),f(document).trigger("rey/close_panels",["filter-panel"]),f.reyHelpers.overlay("header","open"),a.wcFilterPanel.open()}),f(document).on("click",".filter-btnMobile .js-rey-filterBtn-open",function(e){e.preventDefault(),f(document).trigger("rey/close_panels",["filter-sidebar"]),f.reyHelpers.overlay("header","open"),a.wcFilterSidebar.open()}),f(".js-rey-sidePanel-close").on("click",function(e){e.preventDefault(),f(document).trigger("rey/close_panels")}),f(document).on("wcapf_started",function(e){a.reyTheme.elements.$body.addClass("--is-filtering"),f(".is-animated-entry").animate({visibility:"hidden",opacity:0},70)}),f(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){a.reyTheme.elements.$body.removeClass("--is-filtering"),a.reyTheme.general_html(t);var s=f("li.product",t);a.reyTheme.animateItems(s),a.equalizeProductItems(s),a.variableProductAddToCart(s,!0),a.activeFilterCount(t),a.loopProductSlideshows(t),f(document).trigger("rey/close_panels"),f.reyCore.doTooltips()}),f(document).on("rey/product/loaded",function(e,t,r){a.reyTheme.general_html(t),a.reyTheme.animateItems(t),a.doLoopItemSlideshows(f(".rey-productSlideshow",f(t))),a.equalizeProductItems(t),a.variableProductAddToCart(t),a.refreshProductCountAjaxLoad(t)}),f(document).on("rey/refresh_html",function(e,t){a.startVariationForms(t),a.productVariations(t),a.viewSelectorColumns(t)}),f(document).on("rey/close_panels",function(e,t){"mini-cart"!==t&&a.miniCart.close(),"account-panel"!==t&&a.accountPanel.close(),"filter-panel"!==t&&a.wcFilterPanel.close(),"filter-sidebar"!==t&&a.wcFilterSidebar.close(),"quickview"!==t&&a.quickview.close()}),f(document.body).on("wc_fragments_loaded",function(e){var t=f(".js-rey-headerCart"),r=f(".rey-headerCart-nb",t).text();r=parseInt(r),t.closest(".rey-headerCart-wrapper").attr("data-rey-cart-count",r),t.closest(".elementor-widget-reycore-header-cart").attr("data-rey-cart-count",r)}),f(document.body).on("removed_from_cart updated_wc_div",function(e){a.quantityButtonControls(".woocommerce-cart-form")}),f("div.product .woocommerce-review-link").on("click",function(e){e.preventDefault();var t=f(".rey-reviewsBtn");t.length&&(f("html, body").animate({scrollTop:t.offset().top-30},500),t.click())}),f(document).on("rey/view_selector/change_cols",function(e,t){f.reyThemeWooCommerce.equalizeProductItems(t.children())}),f(document.body).on("added_to_cart",function(e,t,r,s){if(void 0!==f.reyHelpers.params.added_to_cart_text){var a=f.reyHelpers.params.added_to_cart_text;if(!s.is("[data-atc-text]")||""!==(a=s.attr("data-atc-text"))){s.hasClass("single_add_to_cart_button")&&!s.hasClass("elementor-button")&&(s=f(".single_add_to_cart_button-text",s));var o=s.text();s.text(a),setTimeout(function(){s.text(o)},1e4)}}}),f(document).on("click",".woocommerce-store-notice__dismiss-link",function(){f.reyTheme.cssJs()}),f(document).on("click",".elementor-button-link.add_to_cart_button[data-product_id]",function(e){e.preventDefault()})},this.genericHtml=function(){if(!f.reyHelpers.is_desktop){var e=f(".single-skin--fullscreen .woocommerce-notices-wrapper");e.length&&e.detach().prependTo(f("div.product"))}},this.loopProductSlideshows=function(e){e=e||f(document);var t=f(".rey-productSlideshow",f(e));t.closest(".elementor-widget-container").length||this.doLoopItemSlideshows(t)},this.doLoopItemSlideshows=function(e){e.each(function(e,t){var a=f(t),r=a.closest("ul.products");if((f.reyHelpers.is_desktop||!f.reyHelpers.params.js_params.product_item_slideshow_disable_mobile)&&!r.hasClass("--prevent-thumbnail-sliders")&&!a.hasClass("--prevent-thumbnail-sliders")){var o=function(){r.hasClass("--msnry-initialised")&&r.masonry()};a.imagesLoaded(function(){a.on("init",function(e,t){1==f.reyHelpers.params.js_params.product_item_slideshow_dots_hover&&f("span",t.$dots).on("mouseenter",function(){t.$slider.slick("slickGoTo",parseInt(f(this).attr("data-index")))}),a.on("mouseenter",function(){t.$slider.slick("slickGoTo",1).slick("slickPlay")}).on("mouseleave",function(){t.$slider.slick("slickPause").slick("slickGoTo",0)}),o()}),a.on("afterChange",function(e,t,r){o()});var e=wp.template("reyArrowSvg"),t=e({direction:"left"}),r=e({direction:"right"}),s={slidesToShow:1,rows:0,adaptiveHeight:!0,fade:!0,swipe:!0,arrows:!0,dots:!0,autoplaySpeed:1600,dotsClass:"rey-productSlideshow-dots",customPaging:function(e,t){return'<span data-index="'+t+'"></span>'},rtl:f.reyHelpers.is_rtl,nextArrow:r,prevArrow:t,responsive:[{breakpoint:767,settings:{dots:!1,arrows:!1,autoplay:!1}}]};"arrows"===f.reyHelpers.params.js_params.product_item_slideshow_nav&&(s.dots=!1),"dots"===f.reyHelpers.params.js_params.product_item_slideshow_nav&&(s.arrows=!1),a.slick(s)})}}),f(document).on("rey/view_selector/change_cols",function(e,t){f(".rey-productSlideshow.slick-initialized",t).each(function(e,t){f(t).slick("refresh")})})},this.productsGrids=function(){var r=this;f(".rey-siteMain ul.products").each(function(e,t){r.productsGrid.init(t,r)})},this.productsGrid={gridTypes:["default","masonry","masonry2","metro","scattered","scattered2"],init:function(e,t){var r=this;this.$pGrid=f(e),0!==this.$pGrid.length&&f.each(this.gridTypes,function(e,t){r.$pGrid.hasClass("rey-wcGrid-"+t)&&void 0!==r["run_"+t]&&r["run_"+t]()})},run_masonry:function(){var s=this;this.doMasonryGrid(),f(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){s.doMasonryGrid(f("ul.products",t))})},run_masonry2:function(){var s=this;this.doMasonryGrid(),f(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){s.doMasonryGrid(f("ul.products",t))})},doMasonryGrid:function(e){var t=e||this.$pGrid,r=!1;t.hasClass("--prevent-masonry")||void 0===f.fn.masonry&&void 0===f.fn.imagesLoaded||(t.imagesLoaded(function(){r||((r=t.masonry({itemSelector:"li.product",percentPosition:!0,transitionDuration:0,isInitLayout:!1})).on("layoutComplete",function(){r.addClass("--msnry-initialised")}),r.masonry())}),f(document).on("rey/refresh_html",function(e,t){t.imagesLoaded(function(){r&&r.masonry("appended",t)})}),f(document).on("rey/view_selector/change_cols",function(e){r&&r.masonry()}))},run_scattered:function(){this.doScattered()},run_scattered2:function(){this.doScattered("mixed")},doScattered:function(t){var r=this;if(!this.$pGrid.hasClass("--prevent-scattered")){this.$products=f("li.product",this.$pGrid);var s=function(e){"mixed"!==t?e.addClass("scGrid-offset"):e.addClass("scGrid-offset-"+f.reyHelpers.getRandomInt(8))};if(f.reyHelpers.params.js_params.scattered_grid_custom_items&&f.reyHelpers.params.js_params.scattered_grid_custom_items.length)f.each(f.reyHelpers.params.js_params.scattered_grid_custom_items,function(e,t){s(f("li.product.post-"+t,r.$pGrid))});else{var e=f.reyHelpers.params.js_params.scattered_grid_max_items||7;this.$products.sort(function(){return.5-Math.random()}).slice(0,e).each(function(e,t){s(f(t))})}}},run_metro:function(){"string"==typeof document.createElement("div").style.grid||(this.$pGrid.addClass("--no-css-grid"),this.doMasonryGrid(),f(document).on("wcapf_finished reycore/ajaxfilters/finished",function(e,t,r){self.doMasonryGrid(f("ul.products",t))}))}},this.ajaxSearch={class:"is-opened",term:"",$searchPanel:f(".js-rey-ajaxSearch"),_request:!1,init:function(){f.reyHelpers.params.ajax_search&&(this.$postType=f('[name="post_type"]',this.$searchPanel),this.$postType.length&&(this.$searchField=f("input[type='search']",this.$searchPanel),this.panel_HTML=wp.template("reySearchPanel"),this.$results=f(".js-rey-searchResults",this.$searchPanel),this.params=f.reyHelpers.params,this.events()))},events:function(){var t=this;this.$searchField.on("search keyup change paste",f.reyHelpers.debounce(function(){var e=f(this).val();""!==e&&e.length>=t.params.js_params.ajax_search_letter_count?""!=t.term&&t.term==e||(t._request&&t._request.abort(),t.$searchPanel.addClass("--loading"),t.doSearch(e)):t.printSearchResults(),t.term=e},1e3)),this.$postType.on("change",function(e){t.term="",t.$searchField.trigger("search"),f(".rey-searchForm-postType > span",t.$searchPanel).text(f("option:selected",this).text())}),f(".rey-searchPanel__suggestions button").on("click",function(e){e.preventDefault(),t.$searchField.val(f(this).text()),t.$searchField.trigger("change")})},doSearch:function(e){var s=this;void 0!==this.params.rest_url&&void 0!==this.params.rest_search_url&&void 0!==this.params.rest_nonce&&void 0!==this.params.search_texts&&(this._request=f.ajax({url:this.params.rest_url+this.params.rest_search_url,cache:!1,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",s.params.rest_nonce)},data:{s:e,post_type:s.$postType.val()},success:function(e){var t=[];e&&e.success&&0!==parseInt(e.total_items)&&(t=e.data.items),s.$searchPanel.addClass("--has-results"),s.printSearchResults(t),s._request=!1},error:function(e,t,r){console.error(e),console.error(t),console.error(r),s._request=!1}}))},printSearchResults:function(e){var t="";f.reyHelpers.isArray(e)?(t=e.length?this.panel_HTML({items:e,only_title:this.params.ajax_search_only_title}):"<div class='rey-searchResults-message'>"+this.params.search_texts.NO_RESULTS+"</div>",this.$searchPanel.removeClass("--loading")):this.$searchPanel.removeClass("--has-results");var r=this.$results.empty().removeClass("--visible").html(t);f(r).imagesLoaded(function(){f(r).addClass("--visible")})}},this.miniCart={scrollContainer:".woocommerce.rey-cartPanel .woocommerce-mini-cart",$reyTheme:f.reyTheme,$cartOpenBtn:f(".js-rey-headerCart"),$cartPanel:f(".js-rey-cartPanel"),init:function(e){this.$app=e,this.$cartOpenBtn.length&&(this.events(),this.refreshScroll())},refreshScroll:function(){var e=f(this.scrollContainer);e.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(e[0])},events:function(){var o=this;this.$cartOpenBtn.on("click",function(e){e.preventDefault(),f(this).hasClass("--cart-checkout")||f.reyHelpers.params.disable_header_cart_panel?window.location.href=f(this).attr("data-href"):f.reyHelpers.is_global_section_mode||f("body.woocommerce-cart.woocommerce-page").length||f("body.woocommerce-checkout.woocommerce-page").length||o.open()}),this.$cartPanel.on("change","input.qty",function(e){var t=f(this),r=t.closest(".woocommerce-mini-cart-item"),s=f("a.remove",r);e.preventDefault(),r.addClass("--loading"),f.ajax({type:"POST",url:f.reyHelpers.params.ajaxurl,data:{action:"rey_update_minicart",cart_item_key:s.data("cart_item_key"),cart_item_qty:t.val(),security:f.reyHelpers.params.ajax_nonce},success:function(e){e&&e.fragments?(f.each(e.fragments,function(e){f(e).fadeTo("400","0.6").addClass("--no-click")}),f.each(e.fragments,function(e,t){f(e).replaceWith(t),f(e).stop(!0).css("opacity","1").removeClass("--no-click")}),f(document.body).trigger("wc_fragments_loaded")):window.location=s.attr("href")},error:function(){f("<p><small>"+f.reyHelpers.params.cannot_update_cart+"</small></p>").appendTo(r),setTimeout(function(){window.location.reload()},1e3)},dataType:"json"})}),f(document).on("click",".woocommerce-mini-cart-item a.remove",function(e){f(this).closest(".woocommerce-mini-cart-item").addClass("--loading")}),f(document.body).on("added_to_cart",function(e,t,r,s){if("yes"!==wc_add_to_cart_params.cart_redirect_after_add){if(s.is("[data-checkout]"))return f(document).off("reycore/minicart/open"),void(window.location=f.reyHelpers.params.checkout_url);if(!s.hasClass("--prevent-open-cart")&&"cart"===f.reyHelpers.params.after_add_to_cart)if(f("body").hasClass("woocommerce-cart")){var a=f(".woocommerce-cart-form");a.length&&f("html,body").animate({scrollTop:a.offset().top},"slow")}else o.open()}}),f(document.body).on("added_to_cart removed_from_cart wc_fragments_refreshed updated_wc_div wc_fragments_loaded ",function(e){o.refreshScroll(),o.$app.quantityButtonControls(o.$cartPanel)}),f(document.body).on("wc_cart_button_updated",function(e,t){t.next(".added_to_cart").remove()}),f(document).on("reycore/minicart/open",function(e){o.open()})},open:function(){f(document).trigger("rey/close_panels",["mini-cart"]),f.reyHelpers.overlay("site","open"),f.reyHelpers.doScroll.disable(),this.$cartPanel.show(0,function(){f("body").addClass("--cart-active --side-panel-active")})},close:function(){var e=this;f("body").removeClass("--cart-active --side-panel-active"),f.reyHelpers.overlay("site","close"),f.reyHelpers.doScroll.enable(),setTimeout(function(){e.$cartPanel.hide(0)},500)}},this.viewSelectorColumns=function(t){t=t||f(document);var r={init:function(e){this.$products=f(e,t),this.$viewSelector=f(".rey-viewSelector",this.$products.prev(".rey-loopHeader")),this.$gridElement=this.$products.closest(".elementor-widget-reycore-product-grid"),this.$eProGridElement=this.$products.closest(".elementor-products-grid"),this.$products.length&&this.$viewSelector.length&&(this.$viewSelectorsChildren=f("li",this.$viewSelector),this.elementId=this.$gridElement.length?this.$gridElement.attr("data-id"):"",this.lsName="rey-active-view-selector-"+f.reyHelpers.params.site_id+this.elementId,this.cols=localStorage.getItem(this.lsName),this.changeCols(),this.events())},changeCols:function(){!this.cols&&this.$viewSelectorsChildren.length&&(this.cols=this.$viewSelectorsChildren.filter(".is-active").attr("data-count")||parseFloat(f.reyHelpers.params.catalog_cols||4),f("body.customizer-preview-mode").length||localStorage.setItem(this.lsName,this.cols)),this.$viewSelector.hasClass("--is-visible")||this.$viewSelector.addClass("--is-visible"),this.$products.hasClass("--is-visible")||this.$products.addClass("--is-visible"),this.$viewSelectorsChildren.removeClass("is-active").filter('[data-count="'+this.cols+'"]').addClass("is-active"),this.$products.removeClass(function(e,t){return(t.match(/(^|\s)columns-\d+/g)||[]).join(" ")}).addClass("columns-"+this.cols).attr("data-cols",this.cols),this.$products.hasClass("rey-wcGrid-metro")&&f.reyHelpers.is_desktop&&f.reyHelpers.setProperty("--woocommerce-grid-columns",this.cols,this.$products[0]),this.$eProGridElement.length&&this.$products.closest(".woocommerce").removeClass(function(e,t){return(t.match(/(^|\s)columns-\d+/g)||[]).join(" ")}).addClass("columns-"+this.cols)},events:function(){var r=this;this.$viewSelectorsChildren.on("click",function(e){var t=f(e.currentTarget).attr("data-count")||3;localStorage.setItem(r.lsName,t),r.cols=t,r.changeCols(),f(document).trigger("rey/view_selector/change_cols",[r.$products])})}};f(".woocommerce ul.products:not(.--prevent-change-cols)").each(function(e,t){Object.create(r).init(t)})},this.wcFilterPanel={class:"--filter-panel-active --side-panel-active",$filter_panel:f("#js-filterPanel"),open:function(){var e=this;this.$filter_panel.show(0,function(){f("body").addClass(e.class),f.reyHelpers.doScroll.disable()}),f(document).trigger("reycore/woocommerce/filter_panel/open")},close:function(){var e=this;f("body").removeClass(this.class),setTimeout(function(){e.$filter_panel.hide(0)},500)}},this.wcFilterSidebar={class:"--side-panel-active",sidebar_class:"--active",$sidebar:f("aside.rey-filterSidebar, .rey-siteMain.rey-filterSidebar .elementor-widget-sidebar, .rey-siteContent > .elementor .elementor-element.elementor-widget-sidebar.rey-filterSidebar"),addCloseButton:function(){var e="";void 0!==f.reyCore.addSvgIcon&&(e=f.reyCore.addSvgIcon("rey-icon-close")),f('<button class="rey-sidePanel-close js-rey-sidePanel-close">'+e+"</button>").appendTo(this.$sidebar.children()).on("click",function(e){e.preventDefault(),f(document).trigger("rey/close_panels")})},open:function(){f("body").addClass(this.class),this.$sidebar.addClass(this.sidebar_class)},close:function(){f("body").removeClass(this.class),this.$sidebar.removeClass(this.sidebar_class)}},this.accountPanel={$btn:f(".js-rey-headerAccount"),$panel:f(".js-rey-accountPanel"),$reyTheme:f.reyTheme,panel_alignment:"right",isOpen:!1,$buttonInUse:!1,init:function(e){this.$app=e,this.$panel&&this.events()},events:function(){var r=this;this.$btn.on("click",function(e){e.preventDefault();var t=f(this);f.reyHelpers.is_global_section_mode||(r.$buttonInUse=t,r.isOpen?r.close():r.open())}),f(".rey-form-row.rey-form-row--text").on("change keyup paste",".rey-input",function(e){var t=f(this);""!==t.val()?t.parent().addClass("--has-value"):t.parent().removeClass("--has-value")}),f(document).on("scroll",function(){r.isOpen&&f.reyHelpers.is_desktop&&r.close()})},open:function(){var e=this;this.isOpen=!0,f(document).trigger("rey/close_panels",["account-panel"]),f.reyHelpers.overlay("header","open"),void 0===f.reyHelpers.params.account_panel_custom_position&&this.doPosition(),this.$panel.show(0,function(){e.$reyTheme.elements.$body.addClass("header-account--active"),f(document).trigger("rey/account_panel/open",[e,this])})},close:function(){var e=this;this.isOpen=!1,this.$panel.length&&(e.$reyTheme.elements.$body.removeClass("header-account--active"),f.reyHelpers.overlay("header","close"),setTimeout(function(){e.$panel.hide(0)},600))},doPosition:function(){var o=this,i=this.$buttonInUse,e=function(){if(!1!==i){var e=i[0].getBoundingClientRect(),t=f(window).width(),r=e.top+i.height(),s=e.left,a=t-(e.left+i.width());o.$panel.css("top",r+"px"),f.reyHelpers.is_mobile?o.$panel.css({left:"",right:""}):s<t/2?o.$panel.addClass("--from-left").css({left:s+"px",right:""}):o.$panel.addClass("--from-right").css({right:a+"px",left:""})}};e(),f(window).on("resize",f.reyHelpers.debounce(e,500))}},this.wishlist_account_panel=function(){var r=function(e){this.wishlist_panel=f(e),this.has_content=!1,this.init=function(){this.wishlist_panel.length&&(this.params=f.reyHelpers.params,this.wishlist_container=this.wishlist_panel.parent(),this.events())},this.events=function(){var r=this;f(document).on("wc_fragments_loaded.wishlist wc_fragments_refreshed.wishlist reycore/woocommerce/wishlist/added_product reycore/woocommerce/wishlist/removed_product",function(){r.has_content=!1,r.wishlist_container.removeClass("--loaded")}),f(document).on("reycore/woocommerce/wishlist/get_saved_products",function(e,t){r.wishlist_panel.addClass("--loading").empty(),r.display(t),r.has_content=!0}),f(document).on("rey/account_panel/open",function(e,t){r.refresh()})},this.refresh=function(){var r=this;this.wishlist_panel.length&&!r.has_content&&this.params.ajaxurl&&this.params.ajax_nonce&&(this.wishlist_panel.addClass("--loading").empty(),f.ajax({url:this.params.ajaxurl,dataType:"json",cache:!1,data:{action:"get_wishlist_data",security:f.reyHelpers.params.ajax_nonce},success:function(e){if(e&&e.success){var t=e.data;f(document).trigger("reycore/woocommerce/wishlist/get_data",[r,t]),t.length?(r.display(t),r.has_content=!0):r.show_empty()}},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}}))},this.refreshScroll=function(){var e=this.wishlist_panel;"undefined"!=typeof SimpleScrollbar&&e.length&&SimpleScrollbar.initEl(e[0])},this.display=function(t){var r=this;if(r.wishlist_panel.removeClass("--loading"),0<t.length){this.wishlist_container.removeClass("--empty"),2<=t.length?this.wishlist_container.addClass("--is-large"):this.wishlist_container.removeClass("--is-large");var e=wp.template("reyWishlistItem")({num:t.length,ob:t});f(e).appendTo(r.wishlist_panel),setTimeout(function(){var e=Math.max(f(".rey-wishlistItem",r.wishlist_panel).eq(0).height(),300);r.wishlist_container.hasClass("--is-large")&&(e=Math.max(f(".rey-wishlistItem",r.wishlist_panel).eq(0).height(),f(".rey-wishlistItem",r.wishlist_panel).eq(1).height(),300)),r.wishlist_container.addClass("--loaded").css("height",e+"px"),2<t.length&&r.refreshScroll()},500)}},this.show_empty=function(){this.wishlist_panel.removeClass("--loading"),this.wishlist_container.addClass("--empty"),this.params.wishlist_empty_text&&f("<p>"+this.params.wishlist_empty_text+"</p>").appendTo(this.wishlist_panel)},this.init()};f(".js-wishlist-panel").each(function(e,t){new r(t)})},this.quickview={pid:!1,init:function(e){this.$app=e,this.$reyTheme=f.reyTheme,this._panel="#js-rey-quickviewPanel",this.$panel=f(this._panel),this.$panelContainer=f(".rey-quickview-container",this.$panel),this.$panel.length&&this.events()},events:function(){var a=this,e=function(e){if(f.reyHelpers.is_desktop){e.preventDefault();var t=f(this).closest(".rey-productInner").attr("data-id");t&&(f.reyHelpers.overlay("site","open"),a.open(t))}};f(document).on("click",".js-rey-quickviewBtn",e),f.reyHelpers.params.quickview_only&&(f(document).on("click","li.product .woocommerce-loop-product__link",e),f(document).on("click","li.product .woocommerce-loop-product__title a",e),f(document).on("click","li.product .rey-productSlideshow a",e)),this.$panel.on("click",".rey-postNav .nav-links > div > a",function(e){e.preventDefault();var t=f(this).children(".rey-productNav__meta").attr("data-id");t&&a.open(t)}),this.$panel.on("click",".js-rey-quickviewPanel-close",function(e){e.preventDefault(),a.close()}),f(document).on("keyup",function(e){27==e.keyCode&&a.close()}),this.$reyTheme.elements.$site_overlay.on("click",function(){a.close()}),f(document).on("reycore/after_quickview_effect",function(e,t){var r=f(t),s=a.$panel.find(".js-scrollbar");s.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(s[0]),a.$app.startVariationForms(r)}),f(document).on("reycore/after_quickview",function(e,t){var r=f(t);f(".woocommerce-product-gallery",r).removeClass("woocommerce-product-gallery--vertical"),a.$panel.addClass("--is-visible").removeClass("--is-loading"),a.$app.quantityButtonControls(r),void 0!==f.reyTheme&&f.reyTheme.general_html(r);var s={easing:"easeInOutQuart",duration:400,complete:function(){f(document).trigger("reycore/after_quickview_effect",[r])}};if(a.$panelContainer.hasClass("--curtain"))anime.timeline(s).add({targets:a._panel+" .rey-quickview-container",scaleX:[0,1]}).add({targets:a._panel+" .rey-quickview-mask",scaleX:[1,0],delay:function(e,t){return 250*t}}).add({targets:a._panel+" .rey-productSummary",scale:[1.1,1]},"-=400");else if(a.$panelContainer.hasClass("--slide")){s.duration="600",s.easing="easeOutQuart",anime.timeline(s).add({targets:a._panel+" .rey-quickview-container",translateY:[150,0],scale:[.95,1],opacity:[0,1]})}a.$app.customizeAtcButton(r)})},open:function(e){var r=this;void 0!==f.reyHelpers.params.ajaxurl&&void 0!==e&&""!=e?(this.pid=e,this.$panel.addClass("--is-loading"),this.$reyTheme.elements.$body.addClass("quickview--is-opened"),""!=f.trim(this.$panelContainer.html())&&this.cleanupPanel(),f(document).trigger("reycore/before_quickview",[e]),f.ajax({method:"post",url:f.reyHelpers.params.ajaxurl,data:{action:"get_quickview_product",id:e},success:function(e){if(!e||e&&!e.success)console.warn(e.data);else{var t=r.$panelContainer.html(e.data);f(document).trigger("reycore/after_quickview",[t])}},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}})):this.close()},close:function(){f.reyHelpers.overlay("site","close"),this.$reyTheme.elements.$body.removeClass("quickview--is-opened"),this.$panel.length&&(this.$panel.removeClass("--is-visible --is-loading"),this.cleanupPanel())},cleanupPanel:function(){this.$panelContainer.fadeOut("fast",function(){f(this).attr("style","").children().remove()})}},this.activeFilterCount=function(e){var t=0,r=f(e).find(".rey-filterBtn__count");r.length&&(t=r.attr("data-count")),f("body").attr("data-active-filters",t)},this.overrideSelect2Defaults=function(){void 0!==f.fn.select2&&(f.fn.select2.defaults.set("containerCssClass","select2-reyStyles"),f.fn.select2.defaults.set("dropdownCssClass","select2-reyStyles"))},this.productVariations=function(e){var r=function(e){this.$variation=f(e),this.$btn=this.$variation.closest("li.product").find(".product_type_variable.add_to_cart_button"),this.btnLink=this.$btn.attr("href"),this.init=function(){this.type=this.$variation.attr("data-attribute-type"),this.variationsData=JSON.parse(this.$variation.attr("data-product_variations")),this.attributeName=this.$variation.attr("data-attribute-name"),this.events(),this.findDisableds()},this.events=function(){var s=this;"select"!==this.type?this.$variation.on("click","li",function(e){e.preventDefault();var t=f(e.currentTarget),r=t.children().attr("data-slug");t.siblings().removeClass("--active"),t.addClass("--active"),s.doChanges(r)}):this.$variation.on("change","select",function(e){e.preventDefault();var t=f(e.currentTarget).val();s.doChanges(t)})},this.doChanges=function(e){var t=this.matchVariation(e);t&&(this.changePrice(t),this.changeThumb(t),this.changeUrl(t))},this.findDisableds=function(){var a=this;f.each(this.variationsData,function(e,t){if("variation_is_visible"in t&&!1===t.variation_is_visible&&"attributes"in t&&a.attributeName in t.attributes){var r="--disabled";!0===t.hidden&&(r="--hidden");var s=t.attributes[a.attributeName];a.$variation.find('li span[data-slug="'+s+'"]').parent().addClass(r)}})},this.matchVariation=function(r){var s=this,a=!1;return f.each(this.variationsData,function(e,t){"attributes"in t&&s.attributeName in t.attributes&&t.attributes[s.attributeName]===r&&(a=t)}),a},this.changePrice=function(e){if("price_html"in e&&""!==e.price_html){var t=this.$variation.closest("li.product").find(".price");t.length&&t.replaceWith(e.price_html)}},this.changeUrl=function(e){var r="";if("attributes"in e&&f.each(e.attributes,function(e,t){t&&(""!==r&&(r+="&"),r+=e+"="+t)}),""!==r){var t=-1!==this.btnLink.indexOf("?")?"&":"?";this.$btn.attr("href",this.btnLink+t+r)}},this.changeThumb=function(e){if("image_src"in e&&"object"==typeof e.image_src){var t=this.$variation.closest("li.product").find(".rey-productThumbnail img:first-of-type");if(t.length){var r=t.attr("src");if(r===e.image_src[0])return;var s=t.attr("srcset")||"";s=s.replace(r,e.image_src[0]);var a=t.attr({src:e.image_src[0],srcset:s}).css("opacity",.2),o=t.parent();t.remove(),a.prependTo(o).on("load",function(){f(this).css({opacity:1,"transition-duration":"700ms"}).nextAll("img").remove()})}}},this.init()};f(".rey-productVariations",f(e||document)).each(function(e,t){new r(t)})},this.productPageVariationsTweaks=function(e){var t=f(e||document);f("div.product form.cart table.variations select[data-attribute_name]",t).each(function(e,t){f("option",t).length<=2&&f(t).val(f("option:last-child",t).val()).trigger("change")})},this.fixedSummary=function(){if(f.reyHelpers.params.fixed_summary&&f.reyHelpers.is_desktop){var r=f(".--fixed-summary .rey-productSummary"),e=f(".summary.entry-summary",r),s=f(".rey-siteHeader.header-pos--fixed"),t=f.reyHelpers.params.fixed_summary__offset;if(r.length&&e.length&&!(f(".woocommerce-product-gallery--with-images > .woocommerce-product-gallery__wrapper").height()<e.height())){e.wrapInner('<div class="__fixed-wrapper"/>');var a=f(".__fixed-wrapper");a.css({width:e.width()}),s.length||a.addClass("--absolute-header");var o,i,n,c,l,d,u=f.reyHelpers.adminBar,p=void 0!==f.reyHelpers.applyFilter?f.reyHelpers.applyFilter("reycore/woocommerce/fixed_summary/bottom_threshold",65):65,h=function(e,t){a.removeClass("--sticked").addClass("--absolute-header").css({top:e-(t+p)+"px"})},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop;n=r.height(),c=a.height(),d=a.offset().top,i=(u=s.length?""!==t?parseInt(t):"":(t=""!==t?parseInt(t):80)+f.reyHelpers.adminBar,d-u),!o&&n<e&&h(n,c)};r.imagesLoaded(function(){m()}),r.on("lazyloaded",function(){m()}),f(document).on("reycore/woocommerce/product_gallery/reset_gallery",function(){m();var t=f(".woocommerce-product-gallery",r);t.imagesLoaded(function(){var e=a.height();t.height()<e?a.css("position","static"):a.css("position","")})}),f(window).on("resize",f.reyHelpers.debounce(function(){m(),a.css("width",e.width())},500)),f(window).on("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;if(l=n<e+c+u,i<e&&!l){if(!o){var t={top:u?u+"px":""};a.removeClass("--absolute-header").addClass("--sticked").css(t),o=!0}}else l?o&&(h(n,c),o=!1):o&&(s.length||a.addClass("--absolute-header"),a.removeClass("--sticked").css({top:""}),o=!1)}).trigger("scroll")}}},this.requestQuote={init:function(){this.$modal=f(".rey-requestQuote-modal"),this.$modalForm=f("form",this.$modal),this.$modalForm.length&&(this.$hiddenId=f('<input type="hidden" name="rey-request-quote-product-id" />').appendTo(this.$modalForm),this.assignId(),this.events())},events:function(){var a=this;f(document).on("click",".js-requestQuote",function(e){e.preventDefault();var t=f(this),r=t.attr("data-id")||0,s=t.closest(".rey-quickviewPanel");s.length&&(r=f("div.product",s).attr("data-id")||0)&&a.assignId(r),f.reyCore.reyModal.init({width:550,content:f(".rey-requestQuote-modal"),wrapperClass:"rey-requestQuote-modalWrapper",zIndex:1060,id:"rq-"+r})}),f(document).on("woocommerce_variation_has_changed",".variations_form",function(e){e.stopImmediatePropagation();var t=f(e.target).find('input[type="hidden"][name="variation_id"]').val();t&&a.assignId(t)})},assignId:function(e){e=e||this.$modal.attr("data-id"),this.$hiddenId.val(e)}},this.AjaxAddToCartProductPage=function(){f.reyHelpers.params.single_ajax_add_to_cart&&f(document).on("submit","form.cart",function(e){var s=f(this),a=f(".single_add_to_cart_button:not(.disabled)",s);if(!a.parents("div.product").hasClass("product-type-external"))if(e.preventDefault(),void 0!==f.reyHelpers.params.ajaxurl&&void 0!==f.reyHelpers.params.ajax_nonce){var t=s.serialize()||"";t+="&action=reycore_ajax_add_to_cart",a.val()&&(t+="&add-to-cart="+a.val()),void 0!==f.reyHelpers.applyFilter&&(t=f.reyHelpers.applyFilter("reycore/woocommerce/addtocart_data",t)),f(document.body).trigger("adding_to_cart",[a,t]),f.ajax({type:"POST",url:f.reyHelpers.params.ajaxurl,data:t,beforeSend:function(e){f(".woocommerce-error",s).remove(),a.removeClass("added").addClass("loading")},success:function(e){if(e)if(void 0===e.success||!1!==e.success){var t=window.location.toString();if(t=t.replace("add-to-cart","added-to-cart"),e.error&&e.product_url)window.location=e.product_url;else if("yes"!==wc_add_to_cart_params.cart_redirect_after_add)if("checkout"!==f.reyHelpers.params.after_add_to_cart){a.removeClass("loading");var r=e.fragments;r&&f.each(r,function(e){f(e).addClass("updating")}),r&&f.each(r,function(e,t){f(e).replaceWith(t)}),void 0!==e.notices&&""!==e.notices&&0<e.notices.indexOf("error")?(s.prepend(e.notices),a.addClass("not-added")):(a.addClass("added"),f(document.body).trigger("added_to_cart",[r,e.cart_hash,a]))}else window.location=f.reyHelpers.params.checkout_url;else window.location=wc_add_to_cart_params.cart_url}else console.warn(e.data)},error:function(){console.warn("Ajax add to cart error!")}})}else console.warn("Ajax url undefined")})},this.equalizeProductItems=function(e){var t=f.reyHelpers.params.js_params.equalize_product_items;if(void 0!==t&&t.length)for(var r=f("ul.products"),s=e||f("li.product",r),a=parseInt(r.attr("data-cols")),n=[],c=0;c<s.length;c+=a){n[c]={};var l=s.slice(c,c+a);f.each(t,function(e,i){l.each(function(a,o){var e=f(i,f(o));n[c][a]={},n[c][a][i]={},n[c][a][i].element=e,n[c][a][i].value=e.height(),n[c][a][i].class=e.attr("class"),n[c][a][i].before=e.prev().attr("class"),void 0!==n[c][a-1]&&(n[c][a-1][i].value>=n[c][a][i].value&&(n[c][a][i].value=n[c][a-1][i].value),""!==n[c][a-1][i].class&&(n[c][a][i].class=n[c][a-1][i].class),""!==n[c][a-1][i].before&&(n[c][a][i].before=n[c][a-1][i].before)),l.length-1===a&&f.each(n[c],function(e,t){var r=n[c][a][i].value;if(t[i].element.length)t[i].element.css("min-height",r);else{var s=f("."+n[c][a][i].before,f(o));f('<div class="'+n[c][a][i].class+'" style="min-height:'+r+'px" />').insertAfter(s)}})})})}},this.quantityButtonControls=function(e){e=e||f(document),f(document).on("focus",".rey-cartBtnQty input.--select-text",function(e){var t=e.currentTarget;t.type="text",t.setSelectionRange(0,t.value.length),f(t).hasClass("--prevent-focus")||(t.type="number")}),f('.rey-qtySelect ~ input[name="quantity"]').remove();var t=f(".rey-qtyField.cartBtnQty-controls",e);if(t.length){f("input",t).addClass("--prevent-focus").attr("type","text");f(".cartBtnQty-control").off("click").on("click",function(e){e.preventDefault();var t=f(this),r=t.nextAll("input"),s=parseFloat(r.val()),a=parseFloat(r.attr("min")||1),o=parseFloat(r.attr("max")||99999),i=parseFloat(r.attr("step")||1);t.hasClass("--disabled")||(r.closest(".product.product-type-grouped").length&&(s=s||0),t.parent().find(".cartBtnQty-control").removeClass("--disabled"),t.hasClass("--minus")?a<s?s-=i:t.addClass("--disabled"):t.hasClass("--plus")&&(s+i==o&&t.addClass("--disabled"),s<o&&(s+=i)),s%1&&(s=s.toFixed(2)),r.val(s).trigger("change"))})}},this.variableProductAddToCart=function(e,t){if(e=e||f(document),f.reyHelpers.params.loop_ajax_variable_products){t&&f(".rey-productLoop-variationsForm").remove();var n=this;f(".product_type_variable.add_to_cart_button",e).on("click",function(e){e.preventDefault(),f(document).trigger("rey/close_panels",["productLoop-variationsForm"]),f.reyHelpers.overlay("site","open");var r=f(this),s=r.closest("li.product"),t=r.attr("data-product_id")||"",o=r.offset();s.addClass("--hover");var a=f('.rey-productLoop-variationsForm[data-id="'+t+'"]'),i=s.width();i<300&&(i=300),f.reyHelpers.is_mobile&&(i="calc(100vw - "+2*o.left+"px )"),a.length?a.css({left:o.left,top:o.top,width:i}).addClass("--visible"):(r.addClass("--loading"),f.ajax({url:f.reyHelpers.params.ajaxurl,data:{action:"reycore_loop_variable_product_add_to_cart",product_id:t},success:function(e){if(e)if(e.success){var t=f(e.data).appendTo(document.body);n.startVariationForms(t),n.quantityButtonControls(t),t.css({left:o.left,top:o.top,width:i}).addClass("--visible"),r.removeClass("--loading");var a=function(e){t.removeClass("--visible").css({left:"",top:""}),s.removeClass("--hover"),!1!==e&&f.reyHelpers.overlay("site","close")};f(".rey-productLoop-variationsForm-close",t).on("click",function(e){e.preventDefault(),a()}),f(document).on("keyup",function(e){27==e.keyCode&&t.hasClass("--visible")&&a()}),f(document.body).on("added_to_cart",function(e,t,r,s){a(!1)}),f(".variations_form",t).addClass("--prevent-scroll-to-gallery")}else console.warn(e.data)}}))}),f(document).on("rey/close_panels",function(e,t){"productLoop-variationsForm"!==t&&(f(".rey-productLoop-variationsForm").removeClass("--visible").css({left:"",top:""}),f("li.product.--hover").removeClass("--hover"))})}},this.productsCarousels=function(p){if(p=p||f(document),void 0!==f.reyHelpers.applyFilter){var e=f.reyHelpers.applyFilter("reycore/productcarousels",[{selector:".cart-collaterals .cross-sells ul.products",slidesToShow:2,slidesToScroll:2,autoplay:!0,autoplaySpeed:6e3}]);f.each(e,function(e,t){var r=f(t.selector,p),s=(r.parent().addClass("rey-productCarousel-wrapper"),f("li.product",r));if(!(s.length<t.slidesToShow)){f.each({"rey-wcGap-":"rey-wcGap-default","rey-wcGap-":"rey-wcGrid-default","columns-":"","":"--prevent-change-cols --prevent-thumbnail-sliders rey-productCarousel"},function(s,e){s&&r.removeClass(function(e,t){var r="\\S*"+s+"\\S*";return(t.match(new RegExp(r,"g"))||[]).join(" ")}),e&&r.addClass(e)}),s.removeClass("is-animated-entry is-animated");var a=wp.template("reyArrowSvg"),o=a({direction:"left"}),i=a({direction:"right"}),n=f('<div class="rey-productCarousel-nav"><span class="rey-productCarousel-navCurrent"></span><span class="rey-productCarousel-navSep">&mdash;</span><span class="rey-productCarousel-navTotal"></span></div>');n.insertAfter(r);var c=f(".rey-productCarousel-navCurrent",n),l=f(".rey-productCarousel-navTotal",n),d=function(e){return(e<10?"0":"")+e};r.on("init",function(e,t){c.text(d(t.currentSlide+1)),l.text(d(t.slideCount))}).on("beforeChange",function(e,t,r,s){c.text(d(s+1))});var u=f.extend({slidesToShow:4,slidesToScroll:1,swipe:!0,infinite:!0,speed:300,arrows:!0,nextArrow:i,prevArrow:o,appendArrows:n,rtl:f.reyHelpers.is_rtl},t);r.slick(u)}})}},this.customizeAtcButton=function(e){e=e||f(document),f("button.single_add_to_cart_button:not(.elementor-button)",e).each(function(){var e=f(this),t=e.text();f(".single_add_to_cart_button-text",e).length||e.html('<span class="single_add_to_cart_button-text">'+t+'</span><span class="rey-lineLoader"></span>')})},this.wcAccountForms=function(){var r=function(e){this.forms=[{type:"login",formScope:"form.js-rey-woocommerce-form-login",replace:".woocommerce-MyAccount-navigation-wrapper"},{type:"forgot",formScope:"form.js-rey-woocommerce-form-forgot",replace:".rey-pageContent > .woocommerce"},{type:"register",formScope:"form.js-rey-woocommerce-form-register",replace:".woocommerce-MyAccount-navigation-wrapper"}],this.init=function(){var r=this;this.$scope=f(e),this.$notice=f(".rey-accountForms-notice",this.$scope),f.each(this.forms,function(e,t){r.makeForm(t)}),this.events()},this.events=function(){var r=this;f(".rey-accountForms-links .btn",this.$scope).on("click",function(e){var t=f(this).attr("data-location")||"";t&&(e.preventDefault(),r.switchForm(t))})},this.makeForm=function(s){var a=this,r=f(s.formScope,this.$scope);this.$scope.is("[data-no-ajax]")||r.on("submit",function(e){e.preventDefault(),a.$scope.addClass("--loading"),a.noticeHandlerRemove();var t=r.serialize()||"";t+="&action=reycore_account_forms",t+="&action_type="+s.type,"login"===s.type?t+="&login="+f('button[name="login"]',r).val():"register"===s.type&&(t+="&register="+f('button[name="register"]',r).val()),console.log(r),console.log(t),f.post({url:f.reyHelpers.params.ajaxurl,data:t,success:function(e){if(e&&(!e||e.success)&&void 0!==e.data)if(a.$scope.removeClass("--loading"),e.data.notices)a.noticeHandlerAdd(e.data.notices);else{if("login"===s.type)f(document).trigger("reycore/woocommerce/after_login",[e]),f("body").addClass("logged-in");else if("register"===s.type)f(document).trigger("reycore/woocommerce/after_register",[e]);else if("forgot"===s.type&&!e.data.notices&&!e.data.html)return void a.switchForm("rey-loginForm");var t=a.$scope.attr("data-redirect-type")||"load_menu",r=a.$scope.attr("data-redirect-url");"refresh"===t?r||window.location.reload():"load_menu"===t&&""!=e.data.html?f(".rey-accountForms").wrap('<div class="rey-accountForms-response --'+s.type+'"></div>').replaceWith(f(e.data.html)):window.location.href=r}},error:function(e,t,r){console.error(e),console.error(t),console.error(r)}})})},this.switchForm=function(e){var t=this;this.$scope.addClass("--loading"),setTimeout(function(){t.$scope.removeClass("--loading"),t.$scope.find(".--active").removeClass("--active"),f("."+e,t.$scope).addClass("--active")},1e3)},this.noticeHandlerAdd=function(e){this.$notice.length&&this.$notice.html(e).addClass("--filled")},this.noticeHandlerRemove=function(e){this.$notice.length&&this.$notice.html("").removeClass("--filled")},this.init()};f(".rey-accountForms").each(function(e,t){new r(t)})},this.startVariationForms=function(e){f(".variations_form",e).each(function(){f(this).wc_variation_form()})},this.productPageMobileTabs=function(){var e=f("div.product .wc-tabs-wrapper");if(e.length){var o=f("ul.wc-tabs",e),i=f(".woocommerce-Tabs-panel",e);i.each(function(t,e){var r=f(e),s=o.children("li").eq(t),a=f("<div />").html(s.html()).attr({class:s.attr("class"),id:s.attr("id"),role:s.attr("role"),"aria-controls":s.attr("aria-controls")}).insertBefore(e).addClass("rey-wcTab-mobile").on("click",function(e){e.preventDefault(),f(".rey-wcTab-mobile").removeClass("--active").removeClass("active"),f(this).addClass("--active"),i.hide(),i.eq(t).show()});f.reyHelpers.params.tabs_mobile_closed&&(r.hide(),a.removeClass("--active").removeClass("active"))})}},this.refreshProductCountAjaxLoad=function(e){var t=f(".woocommerce-result-count");if(f(".rey-ajaxLoadMore").length&&t.length){var r=t.text(),s=t.html(r.replace(/(\d+–\d+)/gi,"<span class='total-count'>$1</span>")),a=f(".total-count",s),o=a.text().split("–");void 0!==e&&2===o.length&&(o[1]=e.length+parseInt(o[1]),a.text(o.join("–")))}},this.automaticallyUpdateCart=function(){var t=function(){var e,t=f('.woocommerce-cart-form [name="update_cart"]');t.length&&f(".woocommerce-cart-form").on("change keyup mouseup","input.qty, select.qty",function(){"undefined"!==e&&clearTimeout(e),""!=f(this).val()&&(e=setTimeout(function(){t.trigger("click")},f.reyHelpers.params.js_params.cart_update_threshold))})};t(),f(document.body).on("added_to_cart removed_from_cart wc_fragments_refreshed updated_wc_div wc_fragments_loaded",function(e){t()})},this.relatedProductsCarousel=function(){if(f.reyHelpers.params.single_related_carousel){var e=f("div.product .related.products ul.products"),t=e.children("li"),r=parseInt(e.attr("data-cols")||"0");if(t.length&&t.length>r){var s=wp.template("reyArrowSvg"),a=s({direction:"left"}),o={slidesToShow:r,slidesToScroll:1,rows:0,swipe:!0,arrows:!0,nextArrow:s({direction:"right"}),prevArrow:a,dots:!1,autoplaySpeed:1600,rtl:f.reyHelpers.is_rtl,responsive:[{breakpoint:767,settings:{slidesToShow:2}}]};void 0!==f.reyHelpers.applyFilter&&(o=f.reyHelpers.applyFilter("reycore/woocommerce/related_products/carousel",o)),e.slick(o)}}},this.init()};f(document).on("reytheme/before_init",function(){f('.rey-wcPanel--description iframe[src*="youtu"], .woocommerce-Tabs-panel--description iframe[src*="youtu"]').wrap("<div class='embed-responsive embed-responsive-16by9'></div>"),f(".woocommerce ul.products li.product .price .rey-discount").each(function(){f(this).clone().addClass("--mobile").appendTo(f(this).closest(".rey-productInner"))})}),f(document).ready(function(){f.reyThemeWooCommerce=new e})}(jQuery);