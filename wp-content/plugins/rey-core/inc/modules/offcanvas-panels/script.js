!function(a){"use strict";var s=function(e,s){this.$body=a("body"),this.isOpen=null,this.$panel=!1,this.entryTimeline=!1,this.settings={},this.hasLegacySettings=!!s&&Object.keys(s).length,this.lazyLoaded=!1,this.init=function(){if(this.$btn=a(e),this.trigger=this.$btn.attr("data-trigger")||"click",this.pre_events(),s){if(this.settings=s,!this.settings.gs)return void console.info("Missing GSID.");this.id=this.settings.gs;var t=a('.rey-offcanvas-wrapper[data-gs-id="'+this.id+'"]');if(t.length||(t=a('.rey-offcanvas-wrapper[data-legacy-id="'+this.id+'"]')),a('.rey-triggerBtn[data-offcanvas-id="'+this.id+'"]').length&&(t=t.clone().appendTo(this.$body)),!t.length)return void console.info("No public offcanvas sections.");this.makeLegacySettings(t)}else{if(this.id=this.$btn.attr("data-offcanvas-id"),!this.id)return void console.info("Missing GSID.");if(this.$panel=a('.rey-offcanvas-wrapper[data-gs-id="'+this.id+'"]'),!this.$panel.length)return;this.makeSettings()}this.make_panel(),this.bind_events()},this.makeSettings=function(){this.hasLegacySettings||(this.settings.position=this.$panel.attr("data-position")||"left",this.settings.transition=this.$panel.attr("data-transition")||"",this.settings.transition_duration=this.$panel.attr("data-transition-duration")||"700",this.settings.shift="yes"===this.$panel.attr("data-shift"),this.settings.animate_inside="yes"===this.$panel.attr("data-animate-cols"),this.settings.close_position=this.$panel.attr("data-close-position")||"inside",this.settings.close_rotate="yes"===this.$panel.attr("data-close-rotate"))},this.makeLegacySettings=function(t){this.hasLegacySettings&&(this.$panel=t.attr({"data-id":this.settings.id,"data-transition":this.settings.transition,"data-transition-duration":this.settings.transition_duration,"data-position":this.settings.position,"data-close-position":this.settings.close_position,"data-close-rotate":this.settings.close_rotate,"data-animate-cols":this.settings.animate_inside,"data-shift":this.settings.shift,"data-legacy-id":this.id}).removeAttr("data-gs-id"),a(".rey-offcanvas-closeText",this.$panel).text(this.settings.close_text))},this.bind_events=function(){var s=this;a(document).on("rey/close_panels",function(t,e){"offcanvas-panels"!==e&&s.close()}),this.$panel&&a('a[href*="#"]:not([href$="#"])',this.$panel).on("click",function(){s.close()}),a(".rey-offcanvas-close",this.$panel).on("click",function(t){t.preventDefault(),s.close()})},this.pre_events=function(){var e=this;"click"===this.trigger?this.$btn.on("click",function(t){t.preventDefault(),e.isOpen?e.close():e.open()}):"hover"===this.trigger&&this.$btn.on("mouseenter",function(t){e.open()}).on("mouseleave",function(t){e.close()})},this.make_panel=function(){this.$contentWrapper=a(".rey-offcanvas-contentWrapper",this.$panel),this.$content=a(".rey-offcanvas-content",this.$panel),this.$closeBtn=a(".rey-offcanvas-close",this.$panel),this.settings.animate_inside&&(a(".elementor-column-wrap.elementor-element-populated, .elementor-widget-wrap.elementor-element-populated",this.$panel).each(function(t,e){a(e).css("transition-delay",75*t+"ms")}),this.$panel.addClass("--animate-inside")),this.settings.close_rotate&&this.$closeBtn.addClass("--close-rotate"),this.refreshScroll();var t=this;if("undefined"!=typeof anime)switch(this.entryTimeline=anime.timeline({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration),autoplay:!1,begin:function(){t.isOpen=!0,t.$body.addClass("--offcanvas-active")},complete:function(){t.$panel.addClass("--active")}}),this.settings.transition){default:var e={left:{translateX:["-100%","0%"]},right:{translateX:["100%","0%"]},top:{translateY:["-100%","0%"]},bottom:{translateY:["100%","-100%"]}};this.entryTimeline.add(a.extend({targets:this.$contentWrapper[0]},e[this.settings.position]));break;case"slideskew":e={left:{opacity:[0,1],translateX:["-120%","0%"],skewX:["-7deg","0deg"]},right:{opacity:[0,1],translateX:["120%","0%"],skewX:["7deg","0deg"]},top:{opacity:[0,1],translateY:["-120%","0%"],skewY:["-7deg","0deg"]},bottom:{opacity:[0,1],translateY:["120%","-120%"],skewY:["7deg","0deg"]}};this.entryTimeline.add(a.extend({targets:this.$contentWrapper[0]},e[this.settings.position]));break;case"curtain":var s,i;s=a(".rey-offcanvas-mask.--m1",this.$panel).length?a(".rey-offcanvas-mask.--m1",this.$panel):a('<div class="rey-offcanvas-mask --m1" />').prependTo(this.$contentWrapper),i=a(".rey-offcanvas-mask.--m2",this.$panel).length?a(".rey-offcanvas-mask.--m2",this.$panel):a('<div class="rey-offcanvas-mask --m2" />').prependTo(this.$contentWrapper);e={left:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},right:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},top:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}},bottom:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}}};var n={m1:"-="+.75*parseInt(this.settings.transition_duration),m2:"-="+.4*parseInt(this.settings.transition_duration)};this.entryTimeline.add(a.extend({targets:this.$contentWrapper[0]},e[this.settings.position].c)).add(a.extend({targets:s[0]},e[this.settings.position].m),n.m1).add(a.extend({targets:i[0]},e[this.settings.position].m),n.m2)}},this.refreshScroll=function(){var t=this.$content;t.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(t[0])},this.animate_panel=function(){"undefined"!=typeof anime&&this.entryTimeline&&this.entryTimeline.play()},this.open=function(){if(!this.$panel.length)return this.lazyLoaded=!0,void this.lazyLoadPanel();a(document).trigger("rey/close_panels",["offcanvas-panels"]),a.reyHelpers.overlay("site","open"),a.reyHelpers.doScroll.disable(),this.settings.shift&&(this.$body.addClass("--offcanvas-shift"),this.$body.addClass("--offcanvas-shift--"+this.settings.position)),this.$btn.addClass("--active"),this.animate_panel()},this.close=function(){if(this.$panel&&this.isOpen){var t=this;anime(a.extend({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration)/2,targets:this.$contentWrapper[0],complete:function(){t.$body.removeClass("--offcanvas-active"),t.$body.removeClass("--offcanvas-shift"),t.$body.removeClass("--offcanvas-shift--"+t.settings.position),t.$panel.removeClass("--active"),t.$btn.removeClass("--active"),a.reyHelpers.overlay("site","close"),a.reyHelpers.doScroll.enable()}},{left:{translateX:["0%","-100%"]},right:{translateX:["0%","100%"]},top:{translateY:["0%","-100%"]},bottom:{translateY:["-100%","100%"]}}[this.settings.position])),this.isOpen=!1}},this.lazyLoadPanel=function(){var e=this;""!==this.id&&void 0!==a.reyHelpers.params.ajaxurl&&void 0!==a.reyHelpers.params.ajax_nonce&&(this.$btn.css({opacity:.5,"pointer-events":"none"}),a.ajax({type:"POST",url:a.reyHelpers.params.ajaxurl,data:{action:"reycore_offcanvas_panel",gs:e.id,security:a.reyHelpers.params.ajax_nonce},dataType:"json",success:function(t){!t||t&&!t.success||(e.$panel=a(t.data).appendTo(e.$body),e.makeSettings(),e.makeLegacySettings(e.$panel),e.make_panel(),e.bind_events(),e.lazyLoaded&&e.restartJs(),e.open(),e.$btn.css({opacity:"","pointer-events":""}))}}))},this.restartJs=function(){"undefined"!=typeof elementorFrontend&&elementorFrontend.hooks&&a(".elementor-element",this.$panel).each(function(t,e){var s=a(e),i=s.attr("data-element_type");"widget"===i&&(i=s.attr("data-widget_type")),elementorFrontend.hooks.doAction("frontend/element_ready/"+i,s,a)})},this.init()};a(document).ready(function(){a(".js-triggerBtn[data-offcanvas-settings]").each(function(t,e){new s(e,a.extend({id:"",gs:"",shift:!0,trigger:"click",position:"left",transition:"",transition_duration:700,animate_inside:!0,close_position:"inside",close_text:"",close_rotate:!1},JSON.parse(a(e).attr("data-offcanvas-settings")||"{}")))}),a(".js-triggerBtn[data-offcanvas-id]").each(function(t,e){new s(e)})})}(jQuery);